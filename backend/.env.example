# ============================================
# FakeTect Backend - Environment Configuration
# ============================================
# Copy this file to .env and fill in your values
# Required variables are marked with [REQUIRED]
# Optional variables have sensible defaults or can be left empty
# ============================================

# --------------------------------------------
# Application Configuration
# --------------------------------------------
NODE_ENV=development                    # [development, production, test]
PORT=3001                               # API server port

# [REQUIRED] Frontend URL for CORS
FRONTEND_URL=http://localhost:5173      # Production: https://faketect.com

# --------------------------------------------
# Database Configuration [REQUIRED]
# --------------------------------------------
# PostgreSQL connection string (Neon, Supabase, or local)
DATABASE_URL="postgresql://USER:PASSWORD@HOST:5432/DATABASE?sslmode=require"

# --------------------------------------------
# Authentication [REQUIRED]
# --------------------------------------------
# [REQUIRED] JWT secret - must be at least 32 characters
# Generate with: node -e "console.log(require('crypto').randomBytes(64).toString('hex'))"
JWT_SECRET=your-super-secret-jwt-key-minimum-32-characters

# JWT token expiration
JWT_EXPIRES_IN=7d                       # Access token expiration
JWT_REFRESH_EXPIRES_IN=30d              # Refresh token expiration

# --------------------------------------------
# Stripe Payment [REQUIRED for payments]
# --------------------------------------------
STRIPE_SECRET_KEY=sk_test_xxx           # Stripe secret key (sk_test_* for test, sk_live_* for prod)
STRIPE_WEBHOOK_SECRET=whsec_xxx         # Stripe webhook signing secret
STRIPE_PUBLISHABLE_KEY=pk_test_xxx      # Stripe publishable key (for frontend)

# --------------------------------------------
# AI Detection APIs [At least one REQUIRED]
# --------------------------------------------

# Illuminarty API (Primary - Recommended for image detection)
ILLUMINARTY_USER=xxx
ILLUMINARTY_SECRET=xxx
ILLUMINARTY_API_KEY=xxx

# OpenAI API (Paid - Advanced vision analysis)
OPENAI_API_KEY=sk-xxx

# Google Gemini API (FREE - Get key at https://aistudio.google.com/apikey)
GEMINI_API_KEY=

# Sightengine API (Tertiary - Alternative detection)
SIGHTENGINE_USER=xxx
SIGHTENGINE_SECRET=xxx

# --------------------------------------------
# Redis Cache [RECOMMENDED]
# --------------------------------------------
# Reduces API costs by 70-80% through caching
# Get free Redis at: https://upstash.com or https://redis.com/try-free/
REDIS_URL=rediss://default:YOUR_TOKEN@YOUR_HOST.upstash.io:6379

# Cache TTL settings (in seconds)
CACHE_TTL_ANALYSIS=86400                # 24 hours for analysis results
CACHE_TTL_USER=3600                     # 1 hour for user data

# --------------------------------------------
# Email Configuration [OPTIONAL]
# --------------------------------------------
# For automated notifications and newsletters
# Supports Gmail/Google Workspace or any SMTP server

# Gmail / Google Workspace
EMAIL_USER=contact@faketect.com
EMAIL_PASS=your-app-specific-password   # Use App Password, not account password
EMAIL_FROM="FakeTect <no-reply@faketect.com>"

# SMTP (Alternative)
# SMTP_HOST=smtp.example.com
# SMTP_PORT=587
# SMTP_SECURE=false
# SMTP_USER=user
# SMTP_PASS=password

# --------------------------------------------
# Monitoring & Error Tracking [RECOMMENDED]
# --------------------------------------------
# Sentry for error tracking (https://sentry.io)
SENTRY_DSN=https://xxxxx@xxxxx.ingest.de.sentry.io/xxxxx
SENTRY_ENVIRONMENT=development          # development, staging, production
SENTRY_TRACES_SAMPLE_RATE=0.1           # Performance monitoring sample rate (0.0-1.0)

# --------------------------------------------
# Rate Limiting
# --------------------------------------------
RATE_LIMIT_WINDOW_MS=900000             # 15 minutes in milliseconds
RATE_LIMIT_MAX_REQUESTS=100             # Max requests per window
RATE_LIMIT_ANALYSIS_MAX=10              # Max analysis requests per window

# --------------------------------------------
# File Upload Configuration
# --------------------------------------------
MAX_FILE_SIZE_MB=100                    # Maximum file size for uploads
UPLOAD_DIR=/tmp/faketect-uploads        # Temporary upload directory

# --------------------------------------------
# Security
# --------------------------------------------
BCRYPT_ROUNDS=12                        # Password hashing rounds (10-12 recommended)
CORS_ORIGIN=http://localhost:5173       # Allowed CORS origins (comma-separated for multiple)

# --------------------------------------------
# Feature Flags
# --------------------------------------------
ENABLE_NEWSLETTER=true                  # Enable newsletter functionality
ENABLE_CHAT_SUPPORT=true                # Enable chat support
ENABLE_API_DOCS=true                    # Enable Swagger API documentation
ENABLE_ADMIN_AUDIT=true                 # Enable admin audit logging

# --------------------------------------------
# Logging
# --------------------------------------------
LOG_LEVEL=info                          # error, warn, info, http, verbose, debug, silly
LOG_FORMAT=combined                     # combined, common, dev, short, tiny
